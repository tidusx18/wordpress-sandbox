!function(o){"use strict";o.fn.jportfoliosingle=function(t){return t=o.extend({adminurl:"",imgfsmode:"fit"},t),o(this).each(function(){var e=this,i=o(".portfolioloader"),r=null,n=function(){var t=o(window).width();o(".portfoliocontent").height(t>1024?o(window).height():o(window).height()-o(".responsiveheader").height()),o(".portfolioholderwrap").height(o("body").hasClass("horizontalnav")?t>1024?o(".portfoliocontent").height()-o(".topnavigation").height():o(".portfoliocontent").height()-o(".portfolionavbar").height():o(".portfoliocontent").height()-o(".portfolionavbar").height())},a=function(){o(".portfolionavbar").hide(),o("body").hasClass("horizontalnav")||o(".portfolionavbar").css("top","-50px"),o(".portfoliobottombar").hide().css("bottom","-45px"),o(".portfolioholderwrap").hide().css("margin-left","-100%"),o(".portfolioinfo").show().removeClass("opened"),o(".portfoliolove").show(),o(".portfolionavnext").show(),o(".portfolionavprev").show()},l=function(){o(".portfolio-content-holder").each(function(){var e=o("img",this).get(0);if(o(e).hasClass("loaded")){var i=o.new_get_image_container_size(e,o(".portfolio-slider-holder"),t.imgfsmode);o(e).css({height:i[0],width:i[1],"max-width":"inherit"}),D(e,i[2]+"px",i[3]+"px")}})},d=function(t){var e=o(t.target).parents(".portfolio-content-holder"),i=o(e).attr("data-type");switch(o(".portfoliovideoclose").fadeIn(),o(".portfoliovideo-container").fadeIn(),o(".portfolio-navigation, .portfoliobottombar").fadeOut(),i){case"youtube":o.type_video_youtube(e,!0,!1);break;case"vimeo":o.type_video_vimeo(e,!0,!1);break;case"html5video":o.type_video_html5(e,!0,{enableAutosize:!0,videoWidth:"100%",videoHeight:"100%",followContainerHeight:!0,features:["playpause","progress","current","duration","tracks","volume"]},".html5-video-container");break;case"soundcloud":o.type_soundcloud(e)}},f=function(){o(".video-container").html(""),o(".html5-video-container").html(""),o(".portfoliovideoclose").unbind("click",f).fadeOut("slow"),o(".portfolio-navigation, .portfoliobottombar").fadeIn(),setTimeout(function(){o(".portfoliovideo-container").fadeOut("slow")},500)},p=function(e,i){var r=i.currentSlideObject,n=o(r).attr("data-type");if(("youtube"==n||"vimeo"==n||"html5video"===n)&&(o(".videooverlay",r).unbind("click",d),f()),"image"!==c(e)){var a=e.currentSlideObject,n=o(a).attr("data-type");if(o("img",a).hasClass("notloaded")){var l=o("img",a).data("src"),p=new Image;o(p).load(function(){o("img",a).attr("src",l);var i=o.new_get_image_container_size(o("img",a),o(".portfolio-slider-holder"),t.imgfsmode);o("img",a).css({height:i[0],width:i[1],"max-width":"inherit"}),D(o("img",a),i[2]+"px",i[3]+"px"),o("img",a).removeClass("notloaded").addClass("loaded"),u(e.currentSlideNumber,e.sliderObject)}).attr("src",l)}else{var s=o("img",a),h=o.new_get_image_container_size(s,o(".portfolio-slider-holder"),t.imgfsmode);o(s).css({height:h[0],width:h[1],"max-width":"inherit"}),D(s,h[2]+"px",h[3]+"px")}"youtube"==n||"vimeo"==n||"html5video"===n?o(".videooverlay",a).bind("click",d):"soundcloud"==n&&o.type_soundcloud(a)}},s=function(t){var e=t.currentSlideObject,i=o(e).data("title"),r=t.currentSlideNumber,n=o(".portfolio-content-holder").length,a=i+" ("+r+"/"+n+")";o(".portfoliobottombar .portfolionavtitle").text(a)},c=function(t){var e=t.currentSlideObject;return o(e).attr("data-type")},h=function(t){o(".portfolionavprev").fadeIn(),o(".portfolionavnext").fadeIn();var e=o(o(t.currentSlideObject).prev()).data("thumb"),i=o(o(t.currentSlideObject).next()).data("thumb");"undefined"!=typeof e&&o(".pt-prev-bg").css({backgroundImage:"url("+e+")"}),"undefined"!=typeof i&&o(".pt-next-bg").css({backgroundImage:"url("+i+")"});var r=o(".portfolio-content-holder").length;1==t.currentSlideNumber&&o(".portfolionavprev").stop().fadeOut(),t.currentSlideNumber==r&&o(".portfolionavnext").stop().fadeOut()},u=function(t,e){var i=o(e).find(".item").get(t),r=o(i).data("thumb"),n=o(i).find("img");if(o(n).hasClass("notloaded")){var a=new Image;o(a).attr("src",o(n).data("src"));var l=new Image;o(l).attr("src",r)}},m=null,v=function(e){o(".portfolio-slider-holder").iosSlider({snapToChildren:!0,desktopClickDrag:!0,autoSlide:!1,navNextSelector:o(".portfolionavnext"),navPrevSelector:o(".portfolionavprev"),onSliderResize:function(){l(),"image"===c(r)&&y(r.currentSlideObject,o(".portfolio-slider-holder"))},onSliderLoaded:function(t){m=t.currentSlideObject,o(i).fadeOut(),l(),"image"===c(t)&&y(t.currentSlideObject,o(".portfolio-slider-holder")),r=t,p(t,r),s(t),h(t),u(t.currentSlideNumber,t.sliderObject),e.call()},onSlideChange:function(e){if(m=e.currentSlideObject,"image"===c(e)){var i=o("img",m).get(0);if(o(i).hasClass("notloaded")){var n=o(i).data("src"),a=new Image;o(a).load(function(){o(i).attr("src",n);var r=o.new_get_image_container_size(i,o(".portfolio-slider-holder"),t.imgfsmode);o(i).css({height:r[0],width:r[1],"max-width":"inherit"}),D(i,r[2]+"px",r[3]+"px"),o(i).addClass("loaded").removeClass("notloaded"),y(m,o(".portfolio-slider-holder")),u(e.currentSlideNumber,e.sliderObject)}).attr("src",n)}else{var l=o.new_get_image_container_size(i,o(".portfolio-slider-holder"),t.imgfsmode);o(i).css({height:l[0],width:l[1],"max-width":"inherit"}),D(i,l[2]+"px",l[3]+"px")}y(m,o(".portfolio-slider-holder"))}p(e,r),r=e,s(e),h(e)}}),L()},g=function(t){var e=o(t.target).parent(".portfolio-content-holder"),i=o(t.target),r=t.pageX-e.offset().left,n=t.pageY-e.offset().top,a=(o(i).height()-o(e).height())*(n/o(e).height()),l=(o(i).width()-o(e).width())*(r/o(e).width());D(i,"-"+l+"px","-"+a+"px")},b=null,w=function(o){b=o,o.unbind("mousemove",g),o.bind("mousemove",g)},x=null,y=function(o,e){"zoom"===t.imgfsmode&&(clearTimeout(x),x=setTimeout(function(){w(o,e.find(".item"))},500))},_=function(t){o(".portfolioholderwrap").show().animate({"margin-left":"0%"},800,"easeInOutQuart",function(){t.call()}),o("body").hasClass("horizontalnav")?o(".portfolionavbar").fadeIn():o(".portfolionavbar").show().animate({top:"0"},800,"easeInOutQuart"),o(".portfoliobottombar").show().animate({bottom:"0"},800,"easeInOutQuart")},C=function(t,e){o(".portfolioinfo").hide(),o(".portfoliolove").hide(),o(".portfolionavprev").hide(),o(".portfolionavnext").hide(),o(i).fadeOut(),"left"==e?o(".portfolioholderwrap").css("margin-left","-100%"):o(".portfolioholderwrap").css("margin-left","100%"),o(".portfolioholderwrap").show(),_(function(){o(".portfolio-form-body [name='password']").focus()})},O=function(t,e){"left"==e?o(".portfolioholderwrap").css("margin-left","-100%"):o(".portfolioholderwrap").css("margin-left","100%"),o(".portfolioholderwrap").show(),v(function(){_(function(){})})},I=function(t,e){a(),o(".portfolioholderwrap").imagesLoaded(function(){o(".portfolio-content-slider").length?O(t,e):o(".portfolio-password-overlay").length&&C(t,e)})},k=function(){o(e).imagesLoaded(function(){n(),I(document.URL,"left")})},S=function(){var t=o(window).width();return 640>=t?100:800>=t?70:1280>=t?50:1600>=t?40:35},z=function(t){t.preventDefault();var e=o(t.currentTarget),i=o(e).parent();if(o(i).hasClass("opened"))o(i).removeClass("opened"),o(".portfolio-content-wrapper").animate({left:"100%"},1e3,"easeInOutQuart");else{o(i).addClass("opened");var r=S(),n=r+"%",a=100-r+"%";o(".portfolio-content-wrapper").css("width",n).animate({left:a},1e3,"easeInOutQuart")}},j=function(t){t.preventDefault(),o(".portfolio-share-overlay").fadeIn()},Q=function(t){t.preventDefault(),o(".portfolio-share-overlay").fadeOut()},R=function(t){var e=t.currentTarget,i=o(e).data("id"),r="",n=o(".portfoliolove").data("title"),a=o(".portfoliolove").data("url"),l=o(".portfoliolove").data("cover");switch(i){case"facebook":r="http://www.facebook.com/sharer.php?u="+encodeURIComponent(a);break;case"twitter":r="http://twitter.com/intent/tweet?url="+encodeURIComponent(a)+"&text="+n;break;case"googleplus":r="https://plus.google.com/share?url="+encodeURIComponent(a);break;case"pinterest":r="http://pinterest.com/pin/create/button/?url="+encodeURIComponent(a)+"&media="+encodeURIComponent(l)+"&description="+encodeURIComponent(n)}return o.open_in_new_tab(r),!1},N=function(o){var t=o.keyCode?o.keyCode:o.which;13==t&&U()},U=function(){var t=o(".portfolio-form-body [name='url']").val(),e=o(".portfolio-form-body [name='password']").val();T("left",t,e)},T=function(t,e,r){var n="left"==t?"100%":"-100%";o(".portfolioinfo").removeClass("opened"),o("body").hasClass("horizontalnav")?o(".portfolionavbar").fadeOut():o(".portfolionavbar").show().animate({top:"-50px"},800,"easeInOutQuart"),o(".portfoliobottombar").animate({bottom:"-45px"},800,"easeInOutQuart"),o(".portfolioholderwrap").show().animate({"margin-left":n},800,"easeInOutQuart",function(){a(),o(i).fadeIn(),o.ajax({url:e,type:"post",data:{password:r},success:function(i){var r=o(".portfolioholderwrap",i).html();if(o(".portfolio-content-slider",i).length){var n=o(".portfolionavbar .portfolionavtitle",i).text(),a=o(".portfoliobottombar .portfolionavtitle",i).text(),l=o(".portfolionext a",i).attr("href"),d=o(".portfolioprev a",i).attr("href"),f=(i.match("<title>(.*?)</title>")[1],o(".portfoliolove",i).data("title")),p=o(".portfoliolove",i).data("url"),s=o(".portfoliolove",i).data("cover");o(".portfoliolove").attr("data-title",f).attr("data-url",p).attr("data-cover",s),o(".portfolionext a").attr("href",l),o(".portfolioprev a").attr("href",d),o(".portfolionavbar .portfolionavtitle").text(n),o(".portfoliobottombar .portfolionavtitle").text(a)}else if(o(".portfolio-password-overlay",i).length){var n=o(".portfolionavbar .portfolionavtitle",i).text();o(".portfolionavbar .portfolionavtitle").text(n)}o(".portfolioholderwrap").html(r),I(e,t)}})})},D=function(t,e,i){o(t).css({left:e,top:i})},L=function(){"zoom"===t.imgfsmode?o(".portfoliozoom").addClass("alt"):o(".portfoliozoom").removeClass("alt")},H=function(){t.imgfsmode="zoom"===t.imgfsmode?"fit":"zoom",L();var e=o("img",m).get(0),i=o.new_get_image_container_size(e,o(".portfolio-slider-holder"),t.imgfsmode);o(e).animate({height:i[0],width:i[1],"max-width":"inherit",left:i[2],top:i[3]},function(){D(e,i[2]+"px",i[3]+"px"),y(m,o(".portfolio-slider-holder"))})};o(".portfoliocontent").on("click",".portfolioinfo a",z),o(".portfoliocontent").on("click",".portfoliovideoclose a",f),o(".portfoliocontent").on("click",".portfoliozoom a",H),o(".portfoliocontent").on("click",".portfoliolove a",j),o(".portfoliocontent").on("click",".share-close",Q),o(".portfoliocontent").on("click",".share-body > div",R),o(".portfoliocontent").on("keypress",".portfolio-form-body [name='password']",N),o(".portfoliocontent").on("click",".portfolio-form-body .slider-button",U),o(window).bind("resize",function(){n()}),joption.ismobile||o.portfolio_popup(),k()})}}(jQuery);